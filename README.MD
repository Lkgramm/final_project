# üß† Friends LLM Chat

–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–π –≤–µ–±-—á–∞—Ç —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –∏–∑ —Å–µ—Ä–∏–∞–ª–∞ **¬´–î—Ä—É–∑—å—è¬ª**, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ LLM (Gemma 3 12B) –∏ FastAPI.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≤—ã–±–æ—Ä–æ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞
- ü§ñ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π LLM —á–µ—Ä–µ–∑ Cloudflare Tunnel
- üí¨ –í–µ–¥–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤ —Å –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –∏—Å—Ç–æ—Ä–∏–∏
- üóÉ –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (SQLite)
- üìú –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏
- üê≥ Docker + Docker Compose –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è

---

## üñºÔ∏è –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: `http://<IP>:8000/`
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏: `http://<IP>:8000/history_ui/{session_id}`

---

## üõ†Ô∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **FastAPI** ‚Äî –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ API
- **Jinja2** ‚Äî HTML-—à–∞–±–ª–æ–Ω—ã
- **Gemma 3 12B** ‚Äî LLM —á–µ—Ä–µ–∑ LM Studio
- **Cloudflare Tunnel** ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ localhost
- **SQLite** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Docker** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫

---

## üß© –ü—Ä–∏–º–µ—Ä `.env`

```env
LM_STUDIO_URL=https://lm.otus-test-1234.online
DEFAULT_CHARACTER=phoebe
````

---

## üì¶ –ö–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
poetry install
```

### 2. –ü–æ–¥–Ω–∏–º–∏ Docker (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

```bash
docker compose up --build
```

### 3. –ó–∞–ø—É—Å—Ç–∏ Cloudflare Tunnel (–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ —Å LM Studio)

```bash
cloudflared tunnel run otus_example
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

* `ChatSession` ‚Äî ID, –ø–µ—Ä—Å–æ–Ω–∞–∂, –¥–∞—Ç–∞
* `Message` ‚Äî —Ä–æ–ª—å (user/bot), —Ç–µ–∫—Å—Ç, –¥–∞—Ç–∞

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
make test
# –∏–ª–∏
poetry run pytest
```

---

## üìå –ò–¥–µ–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è

* üé§ –ì–æ–ª–æ—Å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (TTS)
* üß† –ü–∞–º—è—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
* üìä –ê–¥–º–∏–Ω–∫–∞: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–∏–∞–ª–æ–≥–∞–º
* ü§ñ Telegram-–±–æ—Ç
* üì∑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ —Å—Ü–µ–Ω–∞–º

